<!DOCTYPE html>
<html lang="en">
<head>
     <link rel="icon" type="image/png" sizes="32x32" href="images/logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Godot AI Tools - AI-Powered GDScript Generator</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        :root {
            --primary: #ff6b35;
            --secondary: #2a2a2a;
            --accent: #00d9ff;
            --accent-light: #4de7ff;
            --light: #f8f9fa;
            --dark: #1a1a1a;
            --darker: #121212;
            --success: #28a745;
            --error: #dc3545;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--light);
            background: linear-gradient(135deg, var(--darker) 0%, #2d1b69 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .main-content {
            padding-top: 140px;
            min-height: 100vh;
        }

        .ai-tools-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: fit-content;
            position: sticky;
            top: 140px;
        }

        .sidebar h3 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sidebar-tabs {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .tab-btn {
            background: transparent;
            border: none;
            color: var(--light);
            padding: 1rem;
            text-align: left;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 0.95rem;
            border: 1px solid transparent;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            color: var(--accent-light);
            border-color: rgba(0, 217, 255, 0.2);
            transform: translateX(5px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.15), rgba(0, 217, 255, 0.1));
            color: var(--accent);
            border: 1px solid rgba(0, 217, 255, 0.3);
            box-shadow: 0 4px 15px rgba(0, 217, 255, 0.1);
        }

        .tab-icon {
            font-size: 1.3rem;
            width: 30px;
            text-align: center;
        }

        .content-area {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary), #ff8e53);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-description {
            color: #ccc;
            margin-bottom: 2.5rem;
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .api-config {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(0, 217, 255, 0.05));
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 107, 53, 0.3);
            margin-bottom: 2.5rem;
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.1);
        }

        .api-config h4 {
            color: var(--accent);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.7rem;
            color: var(--accent);
            font-weight: 600;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2);
            background: rgba(255, 255, 255, 0.08);
        }

        .form-group textarea {
            min-height: 150px;
            resize: vertical;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), #e55a2b);
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 1rem;
            margin-right: 1rem;
            margin-bottom: 1rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.4);
        }

        .btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--accent), #00b8d4);
        }

        .btn-secondary:hover {
            box-shadow: 0 10px 25px rgba(0, 217, 255, 0.4);
        }

        .btn-clear {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        .btn-clear:hover {
            box-shadow: 0 10px 25px rgba(108, 117, 125, 0.4);
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .output-area {
            margin-top: 2.5rem;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .output-header h4 {
            color: var(--accent);
            font-size: 1.3rem;
        }

        .output-actions {
            display: flex;
            gap: 1rem;
        }

        .code-output {
            background: #1a1a2e;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Cascadia Code', 'Consolas', monospace;
            color: #e0e0ff;
            overflow-x: auto;
            white-space: pre-wrap;
            min-height: 200px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 3rem;
        }

        .loading.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .spinner {
            border: 4px solid rgba(0, 217, 255, 0.1);
            border-top: 4px solid var(--accent);
            border-right: 4px solid var(--primary);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .message {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            display: none;
            animation: slideIn 0.3s ease;
        }

        .message.show {
            display: block;
        }

        .error-message {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.2), rgba(220, 53, 69, 0.1));
            border: 1px solid var(--error);
            color: #ff6b6b;
        }

        .success-message {
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.2), rgba(40, 167, 69, 0.1));
            border: 1px solid var(--success);
            color: #6bff88;
        }

        @media (max-width: 1024px) {
            .ai-tools-layout {
                grid-template-columns: 1fr;
            }
            .sidebar {
                position: relative;
                top: 0;
            }
            .sidebar-tabs {
                flex-direction: row;
                overflow-x: auto;
            }
            .tab-btn {
                min-width: 180px;
                white-space: nowrap;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding-top: 120px;
            }
            .content-area {
                padding: 1.5rem;
            }
            .section-title {
                font-size: 2rem;
            }
            .output-actions {
                flex-direction: column;
            }
            .btn {
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">GODOT AI TOOLS</div>
                <div class="nav-links">
                    <a href="index.html">Home</a>
                    <a href="scripts.html">Scripts</a>
                    <a href="minicourses.html">Mini Courses</a>
                    <a href="services.html">Services</a>
                    <a href="pvp-game.html">PVP Game Course</a>
                    <a href="course.html">Course</a>
                    <a href="index.html#contact">Contact</a>
                </div>
                <a href="#generate" class="cta-button">Try AI Generator</a>
                <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
            </nav>
        </div>
        
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-header">
                <div class="mobile-menu-logo">GODOT AI TOOLS</div>
                <button class="mobile-close-btn" id="mobileCloseBtn">‚úï</button>
            </div>
            <div class="mobile-nav-links">
                <a href="index.html" onclick="closeMobileMenu()">Home</a>
                <a href="scripts.html" onclick="closeMobileMenu()">Scripts</a>
                <a href="minicourses.html" onclick="closeMobileMenu()">Mini Courses</a>
                <a href="services.html" onclick="closeMobileMenu()">Services</a>
                <a href="pvp-game.html" onclick="closeMobileMenu()">PVP Game Course</a>
                <a href="course.html" onclick="closeMobileMenu()">Course</a>
                <a href="index.html#contact" onclick="closeMobileMenu()">Contact</a>
                <a href="#generate" class="cta-button" onclick="closeMobileMenu()">Try AI Generator</a>
            </div>
        </div>
        <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
    </header>

    <div class="main-content">
        <div class="container">
            <h1 style="text-align: center; margin-bottom: 0.5rem; font-size: 3rem; background: linear-gradient(135deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Godot AI Tools</h1>
            <p style="text-align: center; color: var(--accent-light); margin-bottom: 2.5rem; font-size: 1.2rem;">Generate GDScript & Scene files instantly with AI</p>

            <div class="ai-tools-layout">
                <aside class="sidebar">
                    <h3>üöÄ AI Tools</h3>
                    <div class="sidebar-tabs">
                        <button class="tab-btn active" data-tab="script-generator">
                            <span class="tab-icon">ü§ñ</span>
                            <span>AI Script Generator</span>
                        </button>
                        <button class="tab-btn" data-tab="scene-generator">
                            <span class="tab-icon">üé¨</span>
                            <span>Scene Generator</span>
                        </button>
                        <button class="tab-btn" data-tab="code-templates">
                            <span class="tab-icon">üìã</span>
                            <span>Code Templates</span>
                        </button>
                        <button class="tab-btn" data-tab="code-refactor">
                            <span class="tab-icon">üîß</span>
                            <span>Code Refactor</span>
                        </button>
                        <button class="tab-btn" data-tab="debug-assistant">
                            <span class="tab-icon">üêõ</span>
                            <span>Debug Assistant</span>
                        </button>
                        <button class="tab-btn" data-tab="code-explainer">
                            <span class="tab-icon">üí°</span>
                            <span>Code Explainer</span>
                        </button>
                    </div>
                </aside>

                <main class="content-area">
                    <!-- AI Script Generator Tab -->
                    <div class="tab-content active" id="script-generator">
                        <h2 class="section-title">ü§ñ AI Script Generator</h2>
                        <p class="section-description">Generate production-ready GDScript 4.4 code for your Godot games.</p>

                        <div class="api-config" id="generate">
                            <h4>‚öôÔ∏è AI Configuration</h4>
                            <div class="config-grid">
                                <div class="form-group">
                                    <label for="script-provider">AI Provider</label>
                                    <select id="script-provider">
                                        <option value="groq">Groq (Fast)</option>
                                        <option value="gemini">Google Gemini</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="script-model">AI Model</label>
                                    <select id="script-model"></select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="script-prompt">Describe what you want to create</label>
                            <textarea id="script-prompt" placeholder="Example: Create a 3D player controller with movement, jumping, and camera control. Use CharacterBody3D and include proper input handling." rows="4"></textarea>
                        </div>

                        <div class="btn-group">
                            <button class="btn" id="generate-script-btn">üöÄ Generate GDScript</button>
                            <button class="btn btn-clear" id="clear-script-btn">üóëÔ∏è Clear</button>
                        </div>

                        <div class="loading" id="script-loading">
                            <div class="spinner"></div>
                            <p>AI is generating your script...</p>
                        </div>

                        <div class="error-message message" id="script-error-message"></div>
                        <div class="success-message message" id="script-success-message"></div>

                        <div class="output-area" id="script-output-area" style="display: none;">
                            <div class="output-header">
                                <h4>‚ú® Generated GDScript</h4>
                                <div class="output-actions">
                                    <button class="btn-secondary" id="copy-script-btn">üìã Copy Code</button>
                                    <button class="btn-secondary" id="download-script-btn">üíæ Download (.gd)</button>
                                    <button class="btn btn-clear" id="clear-output-btn">üóëÔ∏è Clear Output</button>
                                </div>
                            </div>
                            <pre class="code-output" id="script-code-output"></pre>
                        </div>
                    </div>

                    <!-- Scene Generator Tab -->
                    <div class="tab-content" id="scene-generator">
                        <h2 class="section-title">üé¨ Scene Generator</h2>
                        <p class="section-description">Generate complete Godot scene files (.tscn) with node hierarchy.</p>

                        <div class="api-config">
                            <h4>‚öôÔ∏è AI Configuration</h4>
                            <div class="config-grid">
                                <div class="form-group">
                                    <label for="scene-provider">AI Provider</label>
                                    <select id="scene-provider">
                                        <option value="groq">Groq (Fast)</option>
                                        <option value="gemini">Google Gemini</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="scene-model">AI Model</label>
                                    <select id="scene-model"></select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="scene-prompt">Describe your scene structure</label>
                            <textarea id="scene-prompt" placeholder="Example: Create a 3D main menu scene with a background, title label, start button, options button, and exit button. Use Control nodes for UI." rows="4"></textarea>
                        </div>

                        <div class="btn-group">
                            <button class="btn" id="generate-scene-btn">üé¨ Generate Scene</button>
                            <button class="btn btn-clear" id="clear-scene-btn">üóëÔ∏è Clear</button>
                        </div>

                        <div class="loading" id="scene-loading">
                            <div class="spinner"></div>
                            <p>AI is generating your scene...</p>
                        </div>

                        <div class="error-message message" id="scene-error-message"></div>
                        <div class="success-message message" id="scene-success-message"></div>

                        <div class="output-area" id="scene-output-area" style="display: none;">
                            <div class="output-header">
                                <h4>‚ú® Generated Scene (.tscn)</h4>
                                <div class="output-actions">
                                    <button class="btn-secondary" id="copy-scene-btn">üìã Copy Scene</button>
                                    <button class="btn-secondary" id="download-scene-btn">üíæ Download (.tscn)</button>
                                    <button class="btn btn-clear" id="clear-scene-output-btn">üóëÔ∏è Clear Output</button>
                                </div>
                            </div>
                            <pre class="code-output" id="scene-code-output"></pre>
                        </div>
                    </div>

                    <!-- Other tabs -->
                    <div class="tab-content" id="code-templates">
                        <h2 class="section-title">üìã Code Templates</h2>
                        <p class="section-description">Pre-built code templates for common Godot patterns.</p>
                    </div>
                    <div class="tab-content" id="code-refactor">
                        <h2 class="section-title">üîß Code Refactor</h2>
                        <p class="section-description">Coming Soon!</p>
                    </div>
                    <div class="tab-content" id="debug-assistant">
                        <h2 class="section-title">üêõ Debug Assistant</h2>
                        <p class="section-description">Coming Soon!</p>
                    </div>
                    <div class="tab-content" id="code-explainer">
                        <h2 class="section-title">üí° Code Explainer</h2>
                        <p class="section-description">Coming Soon!</p>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <script>
        // ========== SANJAY'S API KEYS ==========
        const API_KEYS = {
            groq: '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',
            gemini: 'AIzaSyCScOCC90fh1L2LybA3NYd63rAgb38M5j0'
        };
        
        // Model configurations
        const MODELS = {
            groq: [
                { value: 'llama-3.3-70b-versatile', label: 'Llama 3.3 70B (Best)' },
                { value: 'llama-3.1-8b-instant', label: 'Llama 3.1 8B (Fast)' },
                { value: 'mixtral-8x7b-32768', label: 'Mixtral 8x7B' }
            ],
            gemini: [
                { value: 'gemini-1.5-flash', label: 'Gemini 1.5 Flash' },
                { value: 'gemini-1.5-pro', label: 'Gemini 1.5 Pro' }
            ]
        };

        // Initialize tabs
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.dataset.tab;
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Initialize dropdowns for both script and scene generators
            function initializeDropdowns(providerId, modelId, models) {
                const provider = document.getElementById(providerId);
                const model = document.getElementById(modelId);

                function updateModels() {
                    const selectedProvider = provider.value;
                    model.innerHTML = '';
                    
                    MODELS[selectedProvider].forEach(m => {
                        const option = document.createElement('option');
                        option.value = m.value;
                        option.textContent = m.label;
                        model.appendChild(option);
                    });
                }

                provider.addEventListener('change', updateModels);
                updateModels();
            }

            // Initialize both dropdowns
            initializeDropdowns('script-provider', 'script-model', MODELS);
            initializeDropdowns('scene-provider', 'scene-model', MODELS);

            // ========== SCRIPT GENERATOR FUNCTIONS ==========
            const generateScriptBtn = document.getElementById('generate-script-btn');
            const scriptPrompt = document.getElementById('script-prompt');
            const scriptLoading = document.getElementById('script-loading');
            const scriptErrorMessage = document.getElementById('script-error-message');
            const scriptSuccessMessage = document.getElementById('script-success-message');
            const scriptOutputArea = document.getElementById('script-output-area');
            const scriptCodeOutput = document.getElementById('script-code-output');
            const copyScriptBtn = document.getElementById('copy-script-btn');
            const downloadScriptBtn = document.getElementById('download-script-btn');
            const clearScriptBtn = document.getElementById('clear-script-btn');
            const clearOutputBtn = document.getElementById('clear-output-btn');

            // Clear script prompt
            clearScriptBtn.addEventListener('click', function() {
                scriptPrompt.value = '';
                scriptPrompt.focus();
            });

            // Clear output
            clearOutputBtn.addEventListener('click', function() {
                scriptCodeOutput.textContent = '';
                scriptOutputArea.style.display = 'none';
                hideMessages('script');
            });

            generateScriptBtn.addEventListener('click', async function() {
                const prompt = scriptPrompt.value.trim();
                const provider = document.getElementById('script-provider').value;
                const model = document.getElementById('script-model').value;

                if (!prompt) {
                    showMessage('script-error', 'Please describe what you want to create.');
                    return;
                }

                // Show loading
                generateScriptBtn.disabled = true;
                scriptLoading.classList.add('active');
                hideMessages('script');
                scriptOutputArea.style.display = 'none';

                try {
                    const code = await generateScript(prompt, provider, model);
                    displayCode(code, 'script');
                    showMessage('script-success', '‚úÖ GDScript generated successfully!');
                } catch (error) {
                    showMessage('script-error', `‚ùå Error: ${error.message}`);
                } finally {
                    generateScriptBtn.disabled = false;
                    scriptLoading.classList.remove('active');
                }
            });

            async function generateScript(prompt, provider, model) {
                const systemPrompt = `You are an expert Godot 4.4 game developer. Generate clean, production-ready GDScript 4.4 code following these STRICT rules:

IMPORTANT RULES:
1. Use ONLY Godot 4.4 OFFICIAL syntax from the official documentation
2. ALWAYS use 3D nodes and systems unless SPECIFICALLY asked for 2D
3. Use proper type hints for ALL variables and functions
4. Include comprehensive comments explaining logic
5. Follow Godot best practices and naming conventions
6. Use @export for important properties
7. Include proper error handling
8. Make the code modular and reusable
9. DO NOT include markdown code blocks or explanations
10. Return ONLY the GDScript code

DEFAULT TO 3D:
- Use CharacterBody3D for player characters
- Use Node3D for 3D nodes
- Use Vector3 for 3D vectors
- Use 3D physics and collisions

ONLY use 2D if user explicitly asks for "2D" in their request.

User request: ${prompt}

Generate ONLY the GDScript code.`;

                if (provider === 'groq') {
                    const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${API_KEYS.groq}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: model,
                            messages: [
                                { role: 'system', content: systemPrompt },
                                { role: 'user', content: prompt }
                            ],
                            temperature: 0.7,
                            max_tokens: 4000
                        })
                    });

                    if (!response.ok) {
                        const error = await response.json();
                        throw new Error(error.error?.message || 'API Error');
                    }

                    const data = await response.json();
                    return data.choices[0].message.content.trim();
                } else { // gemini
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${API_KEYS.gemini}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: systemPrompt }]
                            }],
                            generationConfig: {
                                temperature: 0.7,
                                maxOutputTokens: 4000
                            }
                        })
                    });

                    if (!response.ok) {
                        const error = await response.json();
                        throw new Error(error.error?.message || 'API Error');
                    }

                    const data = await response.json();
                    return data.candidates[0].content.parts[0].text.trim();
                }
            }

            // ========== SCENE GENERATOR FUNCTIONS ==========
            const generateSceneBtn = document.getElementById('generate-scene-btn');
            const scenePrompt = document.getElementById('scene-prompt');
            const sceneLoading = document.getElementById('scene-loading');
            const sceneErrorMessage = document.getElementById('scene-error-message');
            const sceneSuccessMessage = document.getElementById('scene-success-message');
            const sceneOutputArea = document.getElementById('scene-output-area');
            const sceneCodeOutput = document.getElementById('scene-code-output');
            const copySceneBtn = document.getElementById('copy-scene-btn');
            const downloadSceneBtn = document.getElementById('download-scene-btn');
            const clearSceneBtn = document.getElementById('clear-scene-btn');
            const clearSceneOutputBtn = document.getElementById('clear-scene-output-btn');

            // Clear scene prompt
            clearSceneBtn.addEventListener('click', function() {
                scenePrompt.value = '';
                scenePrompt.focus();
            });

            // Clear scene output
            clearSceneOutputBtn.addEventListener('click', function() {
                sceneCodeOutput.textContent = '';
                sceneOutputArea.style.display = 'none';
                hideMessages('scene');
            });

            generateSceneBtn.addEventListener('click', async function() {
                const prompt = scenePrompt.value.trim();
                const provider = document.getElementById('scene-provider').value;
                const model = document.getElementById('scene-model').value;

                if (!prompt) {
                    showMessage('scene-error', 'Please describe your scene structure.');
                    return;
                }

                // Show loading
                generateSceneBtn.disabled = true;
                sceneLoading.classList.add('active');
                hideMessages('scene');
                sceneOutputArea.style.display = 'none';

                try {
                    const scene = await generateScene(prompt, provider, model);
                    displayCode(scene, 'scene');
                    showMessage('scene-success', '‚úÖ Scene generated successfully!');
                } catch (error) {
                    showMessage('scene-error', `‚ùå Error: ${error.message}`);
                } finally {
                    generateSceneBtn.disabled = false;
                    sceneLoading.classList.remove('active');
                }
            });

            async function generateScene(prompt, provider, model) {
                const systemPrompt = `You are an expert Godot 4.4 scene designer. Generate a complete Godot scene file (.tscn) with node hierarchy.

STRICT RULES:
1. Output ONLY valid .tscn file content that can be saved directly as a .tscn file
2. Use Godot 4.4 scene format with [gd_scene] header
3. DO NOT include any attached scripts or theme overrides
4. Use ONLY default theme settings for all nodes
5. Structure nodes in a logical hierarchy
6. Include proper node properties and connections
7. Use 3D nodes by default unless specifically asked for 2D
8. DO NOT include any markdown or explanations
9. Return ONLY the .tscn file content

IMPORTANT: The output must be valid .tscn format that can be copied and saved as a .tscn file and opened directly in Godot 4.4.

Scene description: ${prompt}

Generate ONLY the .tscn file content.`;

                if (provider === 'groq') {
                    const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${API_KEYS.groq}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: model,
                            messages: [
                                { role: 'system', content: systemPrompt },
                                { role: 'user', content: prompt }
                            ],
                            temperature: 0.7,
                            max_tokens: 4000
                        })
                    });

                    if (!response.ok) {
                        const error = await response.json();
                        throw new Error(error.error?.message || 'API Error');
                    }

                    const data = await response.json();
                    return data.choices[0].message.content.trim();
                } else { // gemini
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${API_KEYS.gemini}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: systemPrompt }]
                            }],
                            generationConfig: {
                                temperature: 0.7,
                                maxOutputTokens: 4000
                            }
                        })
                    });

                    if (!response.ok) {
                        const error = await response.json();
                        throw new Error(error.error?.message || 'API Error');
                    }

                    const data = await response.json();
                    return data.candidates[0].content.parts[0].text.trim();
                }
            }

            // ========== UTILITY FUNCTIONS ==========
            function displayCode(code, type) {
                code = code.replace(/```(?:gdscript|tscn)?\n?/g, '').replace(/```/g, '').trim();
                
                if (type === 'script') {
                    scriptCodeOutput.textContent = code;
                    scriptOutputArea.style.display = 'block';
                    scriptOutputArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else if (type === 'scene') {
                    sceneCodeOutput.textContent = code;
                    sceneOutputArea.style.display = 'block';
                    sceneOutputArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }

            function showMessage(type, message) {
                let element;
                if (type.includes('script-error')) {
                    element = scriptErrorMessage;
                } else if (type.includes('script-success')) {
                    element = scriptSuccessMessage;
                } else if (type.includes('scene-error')) {
                    element = sceneErrorMessage;
                } else if (type.includes('scene-success')) {
                    element = sceneSuccessMessage;
                }
                
                if (element) {
                    element.textContent = message;
                    element.classList.add('show');
                    
                    if (type.includes('success')) {
                        setTimeout(() => element.classList.remove('show'), 3000);
                    }
                }
            }

            function hideMessages(type) {
                if (type === 'script' || !type) {
                    scriptErrorMessage.classList.remove('show');
                    scriptSuccessMessage.classList.remove('show');
                }
                if (type === 'scene' || !type) {
                    sceneErrorMessage.classList.remove('show');
                    sceneSuccessMessage.classList.remove('show');
                }
            }

            // Copy script to clipboard
            copyScriptBtn.addEventListener('click', function() {
                const code = scriptCodeOutput.textContent;
                navigator.clipboard.writeText(code).then(() => {
                    copyScriptBtn.textContent = '‚úì Copied!';
                    setTimeout(() => {
                        copyScriptBtn.textContent = 'üìã Copy Code';
                    }, 2000);
                });
            });

            // Download script
            downloadScriptBtn.addEventListener('click', function() {
                const code = scriptCodeOutput.textContent;
                const blob = new Blob([code], { type: 'text/x-gdscript' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'godot_script.gd';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                downloadScriptBtn.textContent = '‚úì Downloaded!';
                setTimeout(() => {
                    downloadScriptBtn.textContent = 'üíæ Download (.gd)';
                }, 2000);
            });

            // Copy scene to clipboard
            copySceneBtn.addEventListener('click', function() {
                const code = sceneCodeOutput.textContent;
                navigator.clipboard.writeText(code).then(() => {
                    copySceneBtn.textContent = '‚úì Copied!';
                    setTimeout(() => {
                        copySceneBtn.textContent = 'üìã Copy Scene';
                    }, 2000);
                });
            });

            // Download scene
            downloadSceneBtn.addEventListener('click', function() {
                const code = sceneCodeOutput.textContent;
                const blob = new Blob([code], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'godot_scene.tscn';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                downloadSceneBtn.textContent = '‚úì Downloaded!';
                setTimeout(() => {
                    downloadSceneBtn.textContent = 'üíæ Download (.tscn)';
                }, 2000);
            });

            // Example prompts
            const scriptExamples = [
                "Create a 3D player controller with movement, jumping, and camera control",
                "Make an inventory system for an RPG game using 3D items",
                "Generate enemy AI with patrol and chase states in 3D",
                "Create a health and damage system for a 3D shooter game",
                "Make a save/load system using JSON for 3D game progress"
            ];

            const sceneExamples = [
                "Create a 3D main menu scene with background, title, and buttons",
                "Make a player character scene with CharacterBody3D, mesh, and camera",
                "Generate a 3D level scene with terrain, obstacles, and collectibles",
                "Create a UI scene for game HUD with health bar and score display",
                "Make a 3D enemy scene with AI navigation and attack zones"
            ];

            // Set random examples on load
            const randomScript = scriptExamples[Math.floor(Math.random() * scriptExamples.length)];
            const randomScene = sceneExamples[Math.floor(Math.random() * sceneExamples.length)];
            scriptPrompt.placeholder = `Example: ${randomScript}`;
            scenePrompt.placeholder = `Example: ${randomScene}`;
        });

        // Mobile menu functionality
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileCloseBtn = document.getElementById('mobileCloseBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');

        function openMobileMenu() {
            mobileMenu.classList.add('active');
            mobileMenuOverlay.classList.add('active');
            document.body.classList.add('menu-open');
        }

        function closeMobileMenu() {
            mobileMenu.classList.remove('active');
            mobileMenuOverlay.classList.remove('active');
            document.body.classList.remove('menu-open');
        }

        mobileMenuBtn.addEventListener('click', openMobileMenu);
        mobileCloseBtn.addEventListener('click', closeMobileMenu);
        mobileMenuOverlay.addEventListener('click', closeMobileMenu);
    </script>
</body>
</html>
